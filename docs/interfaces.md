# Интерфейсы

Интерфейсы в Fint позволяют определять контракты для классов, обеспечивая полиморфизм без реализации конкретной логики. Интерфейс объявляется аннотацией `&Интерфейс` и содержит абстрактные методы (без тела), которые должны быть реализованы в классах, наследующих интерфейс. Реализация происходит через аннотацию `&Наследует("ИмяИнтерфейса")`, аналогично наследованию от классов. Это позволяет использовать объекты разных классов через общий интерфейс, поддерживая принцип "программируй на интерфейсах".

Интерфейсы полезны для определения поведения, которое должно быть общим для нескольких классов, без привязки к конкретной реализации. Методы интерфейса могут иметь типизацию параметров и возвращаемых значений, обеспечивая строгую типизацию.

## Базовый интерфейс: ОбработчикЗапроса

Рассмотрим интерфейс `ОбработчикЗапроса` из пространства `fint_web`, который определяет контракт для обработки HTTP-запросов. Он содержит три абстрактных метода: для отправки ответа, отправки ошибки и проверки статуса отправки.

```bsl
&Интерфейс
Перем Этот;

Процедура ОтправитьОтвет() Экспорт
КонецПроцедуры

Процедура ОтправитьОшибку(&Число ТекстОшибки) Экспорт
КонецПроцедуры

&Булево Функция Отправлен() Экспорт
КонецФункции
```

Здесь аннотация `&Интерфейс` указывает, что это интерфейс. Методы объявлены как абстрактные (без тела), с типизацией: `ОтправитьОшибку` принимает параметр типа `&Число`, `Отправлен()` возвращает `&Булево`. Реализация этих методов обязательна в наследующих классах; вызов нереализованного метода приведёт к ошибке.

## Реализация интерфейса: СвойОбработчикЗапросов

Класс `СвойОбработчикЗапросов` реализует интерфейс `ОбработчикЗапроса`. Для этого импортируется пространство `fint_web`, наследуется интерфейс через `&Наследует`, и переопределяются все методы интерфейса.

```bsl
&Импорт("fint_web")
Перем ОбработчикЗапроса;

&Наследует("ОбработчикЗапроса")
Перем Этот, Базовый;

Процедура ОтправитьОтвет() Экспорт
КонецПроцедуры

Процедура ОтправитьОшибку(&Число ТекстОшибки) Экспорт
КонецПроцедуры

&Булево Функция Отправлен() Экспорт
	Возврат Истина;
КонецФункции
```

Импорт `fint_web` делает интерфейс доступным. Аннотация `&Наследует("ОбработчикЗапроса")` указывает на реализацию интерфейса. Методы переопределяются: `ОтправитьОтвет()` и `ОтправитьОшибку()` оставлены пустыми (можно добавить логику), `Отправлен()` возвращает `Истина`, соответствуя типизации `&Булево`. Поскольку интерфейс не имеет конструктора, конструктор в реализации опционален. Переменная `Базовый` здесь не используется, так как интерфейс абстрактный, но доступна для будущих расширений.

## Использование интерфейса

Интерфейсы позволяют работать с объектами полиморфно: переменная может хранить экземпляр любого класса, реализующего интерфейс, и вызывать методы через контракт. Это упрощает замену реализаций без изменения кода.

Пример в точке входа или другом классе:

```bsl
&Импорт("fint_web")
Перем ОбработчикЗапроса;

&Импорт
Перем СвойОбработчикЗапросов;

&ТочкаВхода
Перем Этот;

Процедура Конструктор(&ФиксированныйМассив Аргументы) Экспорт

    // Создание экземпляра реализации
    КонкретныйОбработчик = СвойОбработчикЗапросов.Создать();
    
    // Полиморфное использование: переменная типа интерфейса
    Обработчик = КонкретныйОбработчик; // Присваивание реализации
    
    // Вызов методов интерфейса (полиморфизм)
    Обработчик.ОтправитьОтвет();
    Обработчик.ОтправитьОшибку(500);
    
    Если Обработчик.Отправлен() Тогда
        Сообщить("Ответ отправлен успешно");
    Иначе
        Сообщить("Ответ не отправлен");
    КонецЕсли;

КонецПроцедуры
```

Здесь переменная `Обработчик` типизирована как `&ОбработчикЗапроса`, что обеспечивает проверку типов. Создаётся экземпляр `СвойОбработчикЗапросов`, присваивается переменной интерфейса, и вызываются методы. Если добавить другую реализацию (например, `ДругойОбработчик`), код останется неизменным — полиморфизм позволит заменить без рефакторинга. Все вызовы обеспечивают строгую типизацию и инкапсуляцию Fint.